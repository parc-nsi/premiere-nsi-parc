I"áý<!-- DÃ©finition des hyperliens  -->

<h1 id="crÃ©dits">CrÃ©dits</h1>

<p><em>Ce cours est inspirÃ© du chapitre 14 du manuel NSI de la collection
Tortue chez Ellipse, auteurs : Ballabonski, Conchon, Filliatre, Nâ€™Guyen.
Jâ€™ai Ã©galement consultÃ© le prepabac PremiÃ¨re NSI de Guillaume Connan
chez Hatier, le <a href="https://cache.media.eduscol.education.fr/file/NSI/77/7/RA_Lycee_G_NSI_repd_types_construits_1170777.pdf">document ressource eduscol sur les types
construits</a>
et le livre <strong>Fluent Python</strong>.</em></p>

<h1 id="p-uplets-nommÃ©s-et-dictionnaires"><code class="language-plaintext highlighter-rouge">p-uplets</code> nommÃ©s et dictionnaires</h1>

<p><strong>Exemple 1</strong></p>

<p>Dans le TP sur les <strong>p-uplets</strong> (nommÃ©s aussi <strong>tuples</strong>) on a travaillÃ©
sur un fichier <code class="language-plaintext highlighter-rouge">airports-reduit.csv</code> qui contient les enregistrements
<code class="language-plaintext highlighter-rouge">nom;latitude;longitude;altitude;code_pays</code> pour 57302 aÃ©roports et on a
extrait cette sÃ©rie dans un tableau de <strong>tuples</strong>. Par exemple le
<strong>tuple</strong> correspondant Ã  lâ€™aÃ©roport Saint-ExupÃ©ry est :</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">p_uplet</span> <span class="o">=</span> <span class="n">tab_tuple_airports</span><span class="p">[</span><span class="mi">32478</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p_uplet</span>
<span class="p">(</span><span class="s">'Lyon Saint-ExupÃ©ry Airport'</span><span class="p">,</span> <span class="s">'45.725556'</span><span class="p">,</span> <span class="s">'5.081111'</span><span class="p">,</span> <span class="s">'821'</span><span class="p">,</span> <span class="s">'FR'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p_uplet</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="s">'45.725556'</span>
</code></pre></div></div>

<p>Pour traiter cette information, il faut connaÃ®tre la signification de
chaque Ã©lÃ©ment (appelÃ© aussi <em>champ</em>) du <strong>tuple</strong> puisquâ€™on y accÃ¨de
par son index entier : 0 pour le â€˜nomâ€™, 1 pour la latitude etc â€¦.</p>

<p>Il serait plus lisible de disposer dâ€™un <strong>tuple</strong> Ã  <em>champs nommÃ©s</em> et
de pouvoir accÃ©der Ã  la valeur dâ€™un champ par son nom. Câ€™est le dernier
<strong>type construit</strong> de donnÃ©es que nous allons Ã©tudier.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">p_uplet_nomme</span> <span class="o">=</span> <span class="n">tab_dico_airports</span><span class="p">[</span><span class="mi">32478</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p_uplet_nomme</span>
<span class="p">{</span><span class="s">'nom'</span><span class="p">:</span> <span class="s">'Lyon Saint-ExupÃ©ry Airport'</span><span class="p">,</span> <span class="s">'latitude'</span><span class="p">:</span> <span class="s">'45.725556'</span><span class="p">,</span> <span class="s">'longitude'</span><span class="p">:</span> <span class="s">'5.081111'</span><span class="p">,</span> <span class="s">'altitude'</span><span class="p">:</span> <span class="s">'821'</span><span class="p">,</span> <span class="s">'code_pays'</span><span class="p">:</span> <span class="s">'FR'</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p_uplet_nomme</span><span class="p">[</span><span class="s">'latitude'</span><span class="p">]</span>
<span class="s">'45.725556'</span>
</code></pre></div></div>

<p><strong>DÃ©finition 1</strong></p>

<p>Un <strong>p-uplet nommÃ©</strong> (ou <strong>tuple nommÃ©</strong>) est un <strong>p-uplet</strong> dont chaque
<strong>Ã©lÃ©ment</strong> (ou <strong>champ</strong>) est repÃ©rÃ©e par un nom et non pas par un
entier. Ces <strong>noms</strong> sont appelÃ©s <strong>clefs</strong> ou <strong>descripteurs</strong> du
<strong>p-uplet</strong>, qui sâ€™Ã©crit entre accolades avec une virgule sÃ©parant
chaque paire constituÃ© de la clef et de la valeur de la composante
sÃ©parÃ©es par le symbole <code class="language-plaintext highlighter-rouge">:</code>.</p>

<p>En <a href="https://docs.python.org/3/tutorial/datastructures.html">Python</a>, les
<strong>p-uplets nommÃ©s</strong> sont implÃ©mentÃ©s par les <strong>dictionnaires</strong> de type
<code class="language-plaintext highlighter-rouge">dict</code>. Par la suite nous parlerons de <strong>dictionnaire</strong> plutÃ´t que de
<strong>p-uplet nommÃ©</strong>.</p>

<p>Comme lâ€™accÃ¨s aux valeurs sâ€™effectue par les noms/clefs, comme dans un
dictionnaire oÃ¹ chaque nom est associÃ© Ã  sa dÃ©finition, on parle aussi
de <strong>tableaux associatifs</strong>.</p>

<p>Un dictionnaire nâ€™est pas une sÃ©quence ordonnÃ©e dâ€™Ã©lÃ©ments, lâ€™accÃ¨s
sâ€™effectue uniquement par clef.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">python</span> <span class="o">=</span> <span class="p">{</span><span class="s">'apparition'</span> <span class="p">:</span> <span class="mi">1993</span><span class="p">,</span> <span class="s">'version'</span> <span class="p">:</span> <span class="s">'3.8'</span><span class="p">,</span> <span class="s">'createur'</span> <span class="p">:</span> <span class="s">'Guido Van Rossum'</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">python</span><span class="p">[</span><span class="s">'createur'</span><span class="p">]</span>
<span class="s">'Guido Van Rossum'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">python</span><span class="p">)</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">python</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="nb">KeyError</span><span class="p">:</span> <span class="mi">2</span>
</code></pre></div></div>

<h1 id="un-exemple-de-dictionnaire--les-metadonnÃ©es-exif-dune-photo-numÃ©rique">Un exemple de dictionnaire : les metadonnÃ©es EXIF dâ€™une photo numÃ©rique</h1>

<p>Les photos prises avec un appareil numÃ©rique contiennent de nombreuses
informations. Dans le fichier image, par exemple au format <code class="language-plaintext highlighter-rouge">jpeg</code>, sont
stockÃ©es des donnÃ©es non seulement sur lâ€™image elle-mÃªme mais aussi sur
lâ€™appareil, le logiciel utilisÃ©, et en particulier des donnÃ©es
<a href="https://fr.wikipedia.org/wiki/Exchangeable_image_file_format">EXIF</a>
(Exchangeable Image File Format). Une partie est accessible dans les
propriÃ©tÃ©s de fichier ou avec un logiciel de traitement dâ€™images. Les
spÃ©cifications sont gÃ©rÃ©es par un organisme japonais, le JEITA, qui
dÃ©finit diffÃ©rents dictionnaires de rÃ©fÃ©rence permettant dâ€™accÃ©der Ã 
ces donnÃ©es. Les clÃ©s (les tags) et les valeurs sont des nombres Ã©crits
dans lâ€™entÃªte du fichier. Les dictionnaires donnent lâ€™interprÃ©tation de
ces clÃ©s. Par exemple la clÃ© 256 a pour valeur â€˜Widthâ€™ , la largeur de
lâ€™image en pixel, la clÃ© 257 a pour valeur â€˜Lengthâ€™ , la hauteur de
lâ€™image en pixel.</p>

<p><img src="images/exif.png" alt="donnÃ©es exif" /></p>

<p><em>Source :
<a href="https://commons.wikimedia.org/wiki/File:DigiKam_EXIF_information_screenshot.png">https://commons.wikimedia.org/wiki/File:DigiKam_EXIF_information_screenshot.png</a></em></p>

<p><strong>Exercice 1</strong></p>

<p>On peut extraite les donnÃ©es EXIF avec le logiciel
<a href="https://exiftool.org/">exiftool</a> ou sous forme de dictionnaire
<a href="https://docs.python.org/3/tutorial/datastructures.html">Python</a> avec le
module <a href="https://smarnach.githeub.io/pyexiftool/">pyexiftool</a>. La
fonction ci-dessous permet par exemple dâ€™extraire les donnÃ©es
<a href="https://fr.wikipedia.org/wiki/Exchangeable_image_file_format">EXIF</a>
dâ€™un fichier image sous forme de dictionnaire.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">exiftool</span>

<span class="k">def</span> <span class="nf">extraire_exif</span><span class="p">(</span><span class="n">fichier</span><span class="p">):</span>
    <span class="n">et</span> <span class="o">=</span> <span class="n">exiftool</span><span class="p">.</span><span class="n">ExifTool</span><span class="p">()</span>
    <span class="n">et</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="n">et</span><span class="p">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">fichier</span><span class="p">)</span>
    <span class="n">et</span><span class="p">.</span><span class="n">terminate</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">metadata</span>
</code></pre></div></div>

<ol>
  <li>TÃ©lÃ©charger la photo
<a href="http://frederic-junier.org/SNT/images/20181230_162625.jpg">http://frederic-junier.org/SNT/images/20181230_162625.jpg</a>.</li>
  <li>Extraire ses donnÃ©es
<a href="https://fr.wikipedia.org/wiki/Exchangeable_image_file_format">EXIF</a>
avec <a href="https://exiftool.org/">exiftool</a> ou le script
<a href="https://docs.python.org/3/tutorial/datastructures.html">Python</a>,
puis retrouver la commune oÃ¹ elle a Ã©tÃ© prise. Voici une partie du
dictionnaire obtenu :</li>
</ol>

<!-- end list -->

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">metadata</span> <span class="o">=</span> <span class="n">extraire_exif</span><span class="p">(</span><span class="s">'20181230_162625.jpg'</span><span class="p">)</span>
<span class="p">{...,</span> <span class="s">'EXIF:Make'</span><span class="p">:</span> <span class="s">'samsung'</span><span class="p">,</span> <span class="s">'EXIF:Model'</span><span class="p">:</span> <span class="s">'SM-G930F'</span><span class="p">,</span> <span class="s">'EXIF:Orientation'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'EXIF:XResolution'</span><span class="p">:</span> <span class="mi">72</span><span class="p">,</span>
 <span class="s">'EXIF:YResolution'</span><span class="p">:</span> <span class="mi">72</span><span class="p">,</span> <span class="s">'EXIF:ResolutionUnit'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'EXIF:Software'</span><span class="p">:</span> <span class="s">'G930FXXU3ERL3'</span><span class="p">,</span> <span class="s">'EXIF:ModifyDate'</span><span class="p">:</span> <span class="s">'2018:12:30 16:26:24'</span><span class="p">,</span> <span class="s">'EXIF:YCbCrPositioning'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'EXIF:ExposureTime'</span><span class="p">:</span> <span class="mf">0.0005733944954</span><span class="p">,</span> <span class="s">'EXIF:FNumber'</span><span class="p">:</span> <span class="mf">1.7</span><span class="p">,</span> <span class="s">'EXIF:ExposureProgram'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'EXIF:ISO'</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
 <span class="s">'EXIF:ExifVersion'</span><span class="p">:</span> <span class="s">'0220'</span><span class="p">,</span> <span class="s">'EXIF:DateTimeOriginal'</span><span class="p">:</span> <span class="s">'2018:12:30 16:26:24'</span><span class="p">,</span> <span class="s">'EXIF:CreateDate'</span><span class="p">:</span> <span class="s">'2018:12:30 16:26:24'</span><span class="p">,</span> <span class="s">'EXIF:ComponentsConfiguration'</span><span class="p">:</span> <span class="s">'1 2 3 0'</span><span class="p">,</span> <span class="s">'EXIF:ShutterSpeedValue'</span><span class="p">:</span> <span class="s">'0.000572673315054629'</span><span class="p">,</span> <span class="s">'EXIF:ApertureValue'</span><span class="p">:</span> <span class="mf">1.6993699982773</span><span class="p">,</span> <span class="s">'EXIF:BrightnessValue'</span><span class="p">:</span> <span class="mf">8.36</span><span class="p">,</span>
 <span class="s">'EXIF:ExposureCompensation'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s">'EXIF:MaxApertureValue'</span><span class="p">:</span> <span class="mf">1.6993699982773</span><span class="p">,</span> <span class="s">'EXIF:MeteringMode'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
 <span class="s">'EXIF:Flash'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s">'EXIF:FocalLength'</span><span class="p">:</span> <span class="mf">4.2</span><span class="p">,</span> <span class="s">'EXIF:UserComment'</span><span class="p">:</span> <span class="s">''</span><span class="p">,</span> <span class="s">'EXIF:SubSecTime'</span><span class="p">:</span> <span class="s">'0999'</span><span class="p">,</span>
 <span class="p">....,</span> <span class="s">'EXIF:FlashpixVersion'</span><span class="p">:</span> <span class="s">'0100'</span><span class="p">,</span> <span class="s">'EXIF:ColorSpace'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'EXIF:ExifImageWidth'</span><span class="p">:</span> <span class="mi">4032</span><span class="p">,</span> <span class="s">'EXIF:ExifImageHeight'</span><span class="p">:</span> <span class="mi">3024</span><span class="p">,</span> <span class="p">...,</span> <span class="s">'EXIF:GPSVersionID'</span><span class="p">:</span> <span class="s">'2 2 0 0'</span><span class="p">,</span> <span class="s">'EXIF:GPSLatitudeRef'</span><span class="p">:</span> <span class="s">'N'</span><span class="p">,</span>
 <span class="s">'EXIF:GPSLatitude'</span><span class="p">:</span> <span class="mf">42.4947222222222</span><span class="p">,</span> <span class="s">'EXIF:GPSLongitudeRef'</span><span class="p">:</span> <span class="s">'E'</span><span class="p">,</span> <span class="s">'EXIF:GPSLongitude'</span><span class="p">:</span> <span class="mf">3.13</span><span class="p">,</span>
 <span class="s">'EXIF:GPSAltitudeRef'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s">'EXIF:GPSAltitude'</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span> <span class="s">'EXIF:GPSTimeStamp'</span><span class="p">:</span> <span class="s">'15:26:35'</span><span class="p">,</span><span class="s">'EXIF:GPSDateStamp'</span><span class="p">:</span> <span class="s">'2018:12:30'</span><span class="p">,</span> <span class="p">....</span>
 <span class="p">}</span>
</code></pre></div></div>

<h1 id="crÃ©ation-de-dictionnaire">CrÃ©ation de dictionnaire</h1>

<p>Il existe plusieurs faÃ§ons de construire un dictionnaire :</p>

<ul>
  <li><strong>Par extension :</strong> On peut utiliser la forme littÃ©rale avec les
accolades <code class="language-plaintext highlighter-rouge">{</code> et <code class="language-plaintext highlighter-rouge">}</code> qui entourent la sÃ©rie des paires <code class="language-plaintext highlighter-rouge">clef :
valeur</code> ou le constructeur <code class="language-plaintext highlighter-rouge">dict</code> qui peut convertir en dictionnaire
une sÃ©quence de <code class="language-plaintext highlighter-rouge">tuple</code> de la forme <code class="language-plaintext highlighter-rouge">(clef, valeur)</code>.</li>
</ul>

<!-- end list -->

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">processeur1</span> <span class="o">=</span> <span class="p">{</span><span class="s">'annee'</span> <span class="p">:</span> <span class="mi">1974</span><span class="p">,</span> <span class="s">'fabricant'</span> <span class="p">:</span> <span class="s">'Intel'</span><span class="p">,</span> <span class="s">'Frequence'</span> <span class="p">:</span> <span class="s">'2 MHz'</span><span class="p">,</span><span class="s">'gravure'</span> <span class="p">:</span> <span class="s">'6000 nm'</span><span class="p">,</span> <span class="s">'architecture'</span> <span class="p">:</span> <span class="s">'8080'</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">processeur2</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="s">'annee'</span><span class="p">,</span> <span class="mi">1978</span><span class="p">),</span> <span class="p">(</span><span class="s">'fabricant'</span><span class="p">,</span> <span class="s">'Intel'</span><span class="p">),(</span><span class="s">'Frequence'</span><span class="p">,</span><span class="s">'5 MHz'</span><span class="p">),(</span><span class="s">'gravure'</span><span class="p">,</span><span class="s">'3 micrometres'</span><span class="p">),(</span><span class="s">'architecture'</span><span class="p">,</span><span class="s">'8086'</span><span class="p">)])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">processeur2</span>
<span class="p">{</span><span class="s">'annee'</span><span class="p">:</span> <span class="mi">1978</span><span class="p">,</span> <span class="s">'fabricant'</span><span class="p">:</span> <span class="s">'Intel'</span><span class="p">,</span> <span class="s">'Frequence'</span><span class="p">:</span> <span class="s">'5 MHz'</span><span class="p">,</span> <span class="s">'gravure'</span><span class="p">:</span> <span class="s">'3000 nm'</span><span class="p">,</span> <span class="s">'architecture'</span><span class="p">:</span> <span class="s">'8086'</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">processeur1</span><span class="p">[</span><span class="s">'gravure'</span><span class="p">]</span>
<span class="s">'6000 nm'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">processeur2</span><span class="p">[</span><span class="s">'gravure'</span><span class="p">]</span>
<span class="s">'3000 nm'</span>
</code></pre></div></div>

<ul>
  <li><strong>Par comprÃ©hension :</strong> La syntaxe est la mÃªme que pour les tableaux
de type <code class="language-plaintext highlighter-rouge">list</code> en remplaÃ§ant les parenthÃ¨ses par des accolades. On
peut rÃ©cupÃ©rer les paires <code class="language-plaintext highlighter-rouge">clef : valeur</code> en parcourant un tableau
de <code class="language-plaintext highlighter-rouge">tuple</code>.</li>
</ul>

<!-- end list -->

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">tab_tuple</span> <span class="o">=</span> <span class="p">[(</span><span class="s">'annee'</span><span class="p">,</span> <span class="mi">1989</span><span class="p">),</span> <span class="p">(</span><span class="s">'fabricant'</span><span class="p">,</span> <span class="s">'Intel'</span><span class="p">),(</span><span class="s">'Frequence'</span><span class="p">,</span><span class="s">'25 MHz'</span><span class="p">),(</span><span class="s">'gravure'</span><span class="p">,</span><span class="s">'600 nm'</span><span class="p">),(</span><span class="s">'architecture'</span><span class="p">,</span><span class="s">'80486'</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">processeur3</span> <span class="o">=</span> <span class="p">{</span> <span class="n">clef</span> <span class="p">:</span> <span class="n">valeur</span> <span class="k">for</span> <span class="n">clef</span><span class="p">,</span> <span class="n">valeur</span> <span class="ow">in</span> <span class="n">tab_tuple</span> <span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">processeur3</span>
<span class="p">{</span><span class="s">'annee'</span><span class="p">:</span> <span class="mi">1989</span><span class="p">,</span> <span class="s">'fabricant'</span><span class="p">:</span> <span class="s">'Intel'</span><span class="p">,</span> <span class="s">'Frequence'</span><span class="p">:</span> <span class="s">'25 MHz'</span><span class="p">,</span> <span class="s">'gravure'</span><span class="p">:</span> <span class="s">'600 nm'</span><span class="p">,</span> <span class="s">'architecture'</span><span class="p">:</span> <span class="s">'80486'</span><span class="p">}</span>
</code></pre></div></div>

<p><strong>Exercice 2</strong></p>

<p>La fonction <code class="language-plaintext highlighter-rouge">ord</code> associe Ã  un caractÃ¨re son point de code
<a href="https://fr.wikipedia.org/wiki/Unicode">Unicode</a> et sa rÃ©ciproque est la
fonction <code class="language-plaintext highlighter-rouge">chr</code>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">ord</span><span class="p">(</span><span class="s">'a'</span><span class="p">),</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">97</span><span class="p">)</span>
<span class="p">(</span><span class="mi">97</span><span class="p">,</span> <span class="s">'a'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="nb">chr</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">97</span><span class="p">,</span> <span class="mi">97</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)]</span>
<span class="p">[</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">,</span> <span class="s">'c'</span><span class="p">,</span> <span class="s">'d'</span><span class="p">,</span> <span class="s">'e'</span><span class="p">,</span> <span class="s">'f'</span><span class="p">,</span> <span class="s">'g'</span><span class="p">,</span> <span class="s">'h'</span><span class="p">,</span> <span class="s">'i'</span><span class="p">,</span> <span class="s">'j'</span><span class="p">]</span>
</code></pre></div></div>

<p>Donner des expressions qui permettent de dÃ©finir les dictionnaires
ci-dessous par comprÃ©hension :</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">ordinal</span>
<span class="p">{</span><span class="s">'a'</span><span class="p">:</span> <span class="mi">97</span><span class="p">,</span> <span class="s">'b'</span><span class="p">:</span> <span class="mi">98</span><span class="p">,</span> <span class="s">'c'</span><span class="p">:</span> <span class="mi">99</span><span class="p">,</span> <span class="s">'d'</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s">'e'</span><span class="p">:</span> <span class="mi">101</span><span class="p">,</span> <span class="s">'f'</span><span class="p">:</span> <span class="mi">102</span><span class="p">,</span> <span class="s">'g'</span><span class="p">:</span> <span class="mi">103</span><span class="p">,</span> <span class="s">'h'</span><span class="p">:</span> <span class="mi">104</span><span class="p">,</span> <span class="s">'i'</span><span class="p">:</span> <span class="mi">105</span><span class="p">,</span> <span class="s">'j'</span><span class="p">:</span> <span class="mi">106</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">caractere</span>
<span class="p">{</span><span class="mi">97</span><span class="p">:</span> <span class="s">'a'</span><span class="p">,</span> <span class="mi">98</span><span class="p">:</span> <span class="s">'b'</span><span class="p">,</span> <span class="mi">99</span><span class="p">:</span> <span class="s">'c'</span><span class="p">,</span> <span class="mi">100</span><span class="p">:</span> <span class="s">'d'</span><span class="p">,</span> <span class="mi">101</span><span class="p">:</span> <span class="s">'e'</span><span class="p">,</span> <span class="mi">102</span><span class="p">:</span> <span class="s">'f'</span><span class="p">,</span> <span class="mi">103</span><span class="p">:</span> <span class="s">'g'</span><span class="p">,</span> <span class="mi">104</span><span class="p">:</span> <span class="s">'h'</span><span class="p">,</span> <span class="mi">105</span><span class="p">:</span> <span class="s">'i'</span><span class="p">,</span> <span class="mi">106</span><span class="p">:</span> <span class="s">'j'</span><span class="p">}</span>
</code></pre></div></div>

<h1 id="accÃ¨s-ajout-suppression-dÃ©lÃ©ment-dans-un-dictionnaire">AccÃ¨s, ajout, suppression dâ€™Ã©lÃ©ment dans un dictionnaire</h1>

<ul>
  <li>Lâ€™accÃ¨s, la modification, lâ€™ajout dâ€™un Ã©lÃ©ment se fait avec
lâ€™opÃ©rateur crochet : <code class="language-plaintext highlighter-rouge">dico[clef]</code> retourne la valeur appairÃ©e
avec la clef donnÃ©e dans le dictionnaire <code class="language-plaintext highlighter-rouge">dico</code>. Le nombre
dâ€™Ã©lÃ©ments est donnÃ© par la fonction <code class="language-plaintext highlighter-rouge">len</code>, mais les Ã©lÃ©ments
sont indexÃ©s par les clefs et non par des entiers : <em>il nâ€™y a pas de
notion dâ€™ordre dans un dictionnaire.</em> Comme les tableaux de type
<code class="language-plaintext highlighter-rouge">list</code> et contrairement aux <strong>p-uplets</strong> de type <code class="language-plaintext highlighter-rouge">tuple</code>, les
dictionnaires de type <code class="language-plaintext highlighter-rouge">dict</code> sont modifiables aprÃ¨s modification ,
on dit quâ€™ils sont <strong>mutables</strong>. Un dictionnaire peut Ãªtre construit
par ajout successif de paires <code class="language-plaintext highlighter-rouge">clef : valeur</code> Ã  partir du
dictionnaire vide <code class="language-plaintext highlighter-rouge">{}</code>. Enfin, on peut supprimer un Ã©lÃ©ment si on
connaÃ®t sa <code class="language-plaintext highlighter-rouge">clef</code> avec <code class="language-plaintext highlighter-rouge">del dico[clef]</code>.</li>
</ul>

<!-- end list -->

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">nobel2019</span> <span class="o">=</span> <span class="p">{}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">nobel2019</span><span class="p">[</span><span class="s">'LittÃ©rature'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'Peter Handke'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">nobel2019</span>
<span class="p">{</span><span class="s">'LittÃ©rature'</span><span class="p">:</span> <span class="s">'Peter Handke'</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">nobel2019</span><span class="p">[</span><span class="s">'Paix'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'Kim Joon Hyun'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">nobel2019</span>
<span class="p">{</span><span class="s">'LittÃ©rature'</span><span class="p">:</span> <span class="s">'Peter Handke'</span><span class="p">,</span> <span class="s">'Paix'</span><span class="p">:</span> <span class="s">'Kim Joon Hyun'</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">nobel2019</span><span class="p">[</span><span class="s">'Paix'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'Abiy Ahmed'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">nobel2019</span>
<span class="p">{</span><span class="s">'LittÃ©rature'</span><span class="p">:</span> <span class="s">'Peter Handke'</span><span class="p">,</span> <span class="s">'Paix'</span><span class="p">:</span> <span class="s">'Abiy Ahmed'</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">nobel2019</span><span class="p">[</span><span class="s">'Maths'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'CÃ©dric Villani'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">nobel2019</span>
<span class="p">{</span><span class="s">'LittÃ©rature'</span><span class="p">:</span> <span class="s">'Peter Handke'</span><span class="p">,</span> <span class="s">'Paix'</span><span class="p">:</span> <span class="s">'Abiy Ahmed'</span><span class="p">,</span> <span class="s">'Maths'</span><span class="p">:</span> <span class="s">'CÃ©dric Villani'</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="n">nobel2019</span><span class="p">[</span><span class="s">'Maths'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">nobel2019</span>
<span class="p">{</span><span class="s">'LittÃ©rature'</span><span class="p">:</span> <span class="s">'Peter Handke'</span><span class="p">,</span> <span class="s">'Paix'</span><span class="p">:</span> <span class="s">'Abiy Ahmed'</span><span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>Parce quâ€™un dictionnaire est implÃ©mentÃ© par une <a href="https://fr.wikipedia.org/wiki/Table_de_hachage">table de
hachage</a>, ses
<strong>clefs</strong> doivent, nÃ©cessairement Ãªtre <strong>immutables</strong> (plus
prÃ©cisÃ©ment rÃ©cursivement immutables sâ€™il sâ€™agit de structures
imbriquÃ©es et encore plus prÃ©cisÃ©ment
<a href="https://docs.python.org/3/glossary.html">hachables</a>). Une valeur
est <strong>immutable</strong> si elle ne peut pas Ãªtre modifiÃ©e aprÃ¨s sa
crÃ©ation. Les types de base <code class="language-plaintext highlighter-rouge">int</code>, <code class="language-plaintext highlighter-rouge">float</code>, <code class="language-plaintext highlighter-rouge">bool</code> et les types
construits <code class="language-plaintext highlighter-rouge">tuple</code>, <code class="language-plaintext highlighter-rouge">str</code> sont <strong>immutables</strong> mais pas les types
<code class="language-plaintext highlighter-rouge">list</code> et <code class="language-plaintext highlighter-rouge">dict</code> (un dictionnaire ne peut pas Ãªtre une clef de
dictionnaire).</li>
</ul>

<!-- end list -->

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">jouet</span> <span class="o">=</span><span class="nb">dict</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">jouet</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s">'clef de type int'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">jouet</span><span class="p">[</span><span class="bp">True</span><span class="p">]</span> <span class="o">=</span> <span class="s">'clef de type bool'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">jouet</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)]</span> <span class="o">=</span> <span class="s">'clef de type tuple'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">jouet</span>
<span class="p">{</span><span class="mi">2</span><span class="p">:</span> <span class="s">'clef de type int'</span><span class="p">,</span> <span class="bp">True</span><span class="p">:</span> <span class="s">'clef de type bool'</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span> <span class="s">'clef de type tuple'</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">jouet</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="s">'clef de type list -&gt; impossible'</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="nb">TypeError</span><span class="p">:</span> <span class="n">unhashable</span> <span class="nb">type</span><span class="p">:</span> <span class="s">'list'</span>
</code></pre></div></div>

<ul>
  <li>Une dictionnaire ne peut pas Ãªtre une clef, mais peut Ãªtre une
valeur dans un autre dictionnaire. On peut dÃ©finir toutes sortes de
structures imbriquÃ©es comme des tableaux de dictionnaires â€¦</li>
</ul>

<!-- end list -->

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">vols</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Lisbonne'</span><span class="p">:</span> <span class="p">{</span><span class="s">'heure'</span><span class="p">:</span> <span class="s">'21:10'</span><span class="p">,</span><span class="s">'num'</span><span class="p">:</span> <span class="s">'EJU7674'</span><span class="p">,</span><span class="s">'compagnie'</span><span class="p">:</span> <span class="s">'EASYJET'</span><span class="p">},</span>
<span class="p">...</span> <span class="s">'Vienne'</span><span class="p">:</span> <span class="p">{</span><span class="s">'heure'</span><span class="p">:</span> <span class="s">'21:25'</span><span class="p">,</span><span class="s">'num'</span><span class="p">:</span> <span class="s">'OS430'</span><span class="p">,</span><span class="s">'compagnie'</span><span class="p">:</span> <span class="s">'AUSTRIAN AIRLINES'</span><span class="p">},</span>
<span class="p">...</span> <span class="s">'Londres'</span><span class="p">:</span> <span class="p">{</span><span class="s">'heure'</span><span class="p">:</span> <span class="s">'21:55'</span><span class="p">,</span><span class="s">'num'</span><span class="p">:</span> <span class="s">'BA357'</span><span class="p">,</span><span class="s">'compagnie'</span><span class="p">:</span> <span class="s">'BRITISH AIRWAYS'</span><span class="p">}}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">vols</span><span class="p">[</span><span class="s">'Londres'</span><span class="p">]</span>
<span class="p">{</span><span class="s">'heure'</span><span class="p">:</span> <span class="s">'21:55'</span><span class="p">,</span> <span class="s">'num'</span><span class="p">:</span> <span class="s">'BA357'</span><span class="p">,</span> <span class="s">'compagnie'</span><span class="p">:</span> <span class="s">'BRITISH AIRWAYS'</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tab_dico_airports</span>
<span class="p">[{</span><span class="s">'nom'</span><span class="p">:</span> <span class="s">'Total Rf Heliport'</span><span class="p">,</span><span class="s">'latitude'</span><span class="p">:</span> <span class="s">'40.07080078125'</span><span class="p">,</span> <span class="s">'longitude'</span><span class="p">:</span> <span class="s">'-74.93360137939453'</span><span class="p">,</span>
  <span class="s">'altitude'</span><span class="p">:</span> <span class="s">'11'</span><span class="p">,</span>  <span class="s">'code_pays'</span><span class="p">:</span> <span class="s">'US'</span><span class="p">},</span>
   <span class="p">{</span><span class="s">'nom'</span><span class="p">:</span> <span class="s">'Aero B Ranch Airport'</span><span class="p">,</span>  <span class="s">'latitude'</span><span class="p">:</span> <span class="s">'38.704022'</span><span class="p">,</span>  <span class="s">'longitude'</span><span class="p">:</span> <span class="s">'-101.473911'</span><span class="p">,</span>
  <span class="s">'altitude'</span><span class="p">:</span> <span class="s">'3435'</span><span class="p">,</span>  <span class="s">'code_pays'</span><span class="p">:</span> <span class="s">'US'</span><span class="p">}]</span>
</code></pre></div></div>

<ul>
  <li>Avec lâ€™opÃ©rateur crochet, si une clef nâ€™appartient Ã  un
dictionnaire, une exception (erreur en
<a href="https://docs.python.org/3/tutorial/datastructures.html">Python</a>)
est levÃ©e. La mÃ©thode <code class="language-plaintext highlighter-rouge">get</code> permet de retourner la valeur <code class="language-plaintext highlighter-rouge">None</code> par
dÃ©faut si on ne veut pas dâ€™erreur.</li>
</ul>

<!-- end list -->

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">prix_turing2006</span> <span class="o">=</span> <span class="p">{</span><span class="s">'nom'</span> <span class="p">:</span> <span class="s">'Frances Allen'</span><span class="p">,</span> <span class="s">'sujet'</span> <span class="p">:</span> <span class="s">'Optimisation des compilateurs'</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">prix_turing2006</span><span class="p">[</span><span class="s">'pays'</span><span class="p">]</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="nb">KeyError</span><span class="p">:</span> <span class="s">'pays'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">prix_turing2006</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'pays'</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Exercice 3</strong></p>

<p><em>QCM de type E3C 2</em>.</p>

<ol>
  <li><strong>Question 1</strong> Comment peut-on accÃ©der Ã  la valeur associÃ©e Ã  une
clÃ© dans un dictionnaire ?</li>
</ol>

<p><strong><em>RÃ©ponses</em></strong></p>

<p><strong>A)</strong> il faut parcourir le dictionnaire avec une boucle Ã  la recherche
de la clÃ©</p>

<p><strong>B)</strong> on peut y accÃ©der directement Ã  partir de la clÃ©</p>

<p><strong>C)</strong> on ne peut pas accÃ©der Ã  une valeur contenue dans un dictionnaire
Ã  partir dâ€™une clÃ©</p>

<p><strong>D)</strong> il faut dâ€™abord dÃ©chiffrer la clÃ© pour accÃ©der Ã  un dictionnaire</p>

<ol>
  <li><strong>Question 2</strong> On a dÃ©fini un dictionnaire :</li>
</ol>

<p>contacts = {â€˜Paulâ€™: â€˜0601010182â€™, â€˜Jacquesâ€™: â€˜0602413824â€™, â€˜Claireâ€™:
â€˜0632451153â€™}</p>

<p>Quelle instruction Ã©crire pour ajouter Ã  ce dictionnaire un nouveau
contact nommÃ© Juliette avec le numÃ©ro de tÃ©lÃ©phone 0603040506 ?</p>

<p><strong>RÃ©ponses</strong></p>

<p><strong>A)</strong> â€˜Julietteâ€™: â€˜0603040506â€™</p>

<p><strong>B)</strong> contacts.append(â€˜Julietteâ€™: â€˜0603040506â€™)</p>

<p><strong>C)</strong> contacts[â€˜Julietteâ€™] = â€˜0603040506â€™</p>

<p><strong>D)</strong> contacts.append(â€˜Julietteâ€™, â€˜0603040506â€™)</p>

<ol>
  <li><strong>Question 3</strong> ConsidÃ©rons le dictionnaire suivant :</li>
</ol>

<p>resultats = {â€˜Paulâ€™:5 , â€˜Aminaâ€™:1 , â€˜LÃ©onâ€™ : 9 , â€˜Benoitâ€™:3}</p>

<p>Quelle affirmation est correcte ?</p>

<p><strong>RÃ©ponses</strong></p>

<p><strong>A)</strong> resultats[â€˜Aminaâ€™] vaut 1</p>

<p><strong>B)</strong> resultats[1] vaut â€˜Aminaâ€™</p>

<p><strong>C)</strong> â€˜Paulâ€™ est une valeur de ce dictionnaire</p>

<p><strong>D)</strong> 9 est une clÃ© de ce dictionnaire</p>

<ol>
  <li><strong>Question 4</strong> Pour gÃ©rer certaines donnÃ©es EXIF de photographies,
on a utilisÃ© le code suivant pour stocker dans une liste L de
dictionnaires quelques donnÃ©esÂ :</li>
</ol>

<!-- end list -->

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">L</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">L</span><span class="p">.</span><span class="n">append</span><span class="p">({</span><span class="s">'marque'</span><span class="p">:</span> <span class="s">'Canon'</span><span class="p">,</span> <span class="s">'modele'</span><span class="p">:</span> <span class="s">'EOS 7D'</span><span class="p">,</span> <span class="s">'focale'</span><span class="p">:</span>
<span class="s">'19mm'</span><span class="p">,</span> <span class="s">'flash'</span><span class="p">:</span> <span class="bp">False</span><span class="p">})</span>
<span class="n">L</span><span class="p">.</span><span class="n">append</span><span class="p">({</span><span class="s">'marque'</span><span class="p">:</span> <span class="s">'Nikon'</span><span class="p">,</span> <span class="s">'modele'</span><span class="p">:</span> <span class="s">'CoolPix A1000'</span><span class="p">,</span>
<span class="s">'focale'</span><span class="p">:</span> <span class="s">'19mm'</span><span class="p">,</span> <span class="s">'flash'</span><span class="p">:</span> <span class="bp">True</span><span class="p">})</span>
<span class="n">L</span><span class="p">.</span><span class="n">append</span><span class="p">({</span><span class="s">'marque'</span><span class="p">:</span> <span class="s">'Sony'</span><span class="p">,</span> <span class="s">'modele'</span><span class="p">:</span> <span class="s">'HK 350'</span><span class="p">,</span> <span class="s">'focale'</span><span class="p">:</span>
<span class="s">'24mm'</span><span class="p">,</span> <span class="s">'flash'</span><span class="p">:</span> <span class="bp">False</span><span class="p">})</span>
<span class="n">L</span><span class="p">.</span><span class="n">append</span><span class="p">({</span><span class="s">'marque'</span><span class="p">:</span> <span class="s">'Sony'</span><span class="p">,</span> <span class="s">'modele'</span><span class="p">:</span> <span class="s">'HK 350'</span><span class="p">,</span> <span class="s">'focale'</span><span class="p">:</span>
<span class="s">'19mm'</span><span class="p">,</span> <span class="s">'flash'</span><span class="p">:</span> <span class="bp">True</span><span class="p">})</span>
</code></pre></div></div>

<p>â€¦â€¦ et ainsi de suite, dâ€™autres informations ont Ã©tÃ© ajoutÃ©es â€¦â€¦</p>

<p>On veut extraire de ces informations la liste Z des photographies
obtenues avec un Canon ou un Nikon et une distance focale de 19 mm.</p>

<p>Quelle instruction permet de rÃ©aliser cette extraction ?</p>

<p><strong><em>RÃ©ponses</em></strong></p>

<p><strong>A)</strong> Z = [ p for p in L if (p[â€˜marqueâ€™] == â€˜Canonâ€™ or p[â€˜focaleâ€™]
== â€˜19mmâ€™) andÂ (p[â€˜marqueâ€™]Â ==Â â€™Nikonâ€™Â orÂ p[â€˜focaleâ€™] == â€˜19mmâ€™) ]</p>

<p><strong>B)</strong> Z = [ p for p in L if (p[â€˜marqueâ€™] == â€˜Canonâ€™ and
p[â€˜focaleâ€™] == â€˜19mmâ€™) andÂ (p[â€˜marqueâ€™]Â ==Â â€™Nikonâ€™
Â andÂ p[â€˜focaleâ€™] == â€˜19mmâ€™) ]</p>

<p><strong>C)</strong> Z = [ p for p in L if (p[â€˜marqueâ€™] == â€˜Canonâ€™ or p[â€˜focaleâ€™]
== â€˜19mmâ€™) orÂ (p[â€˜marqueâ€™]Â ==Â â€™Nikonâ€™Â orÂ p[â€˜focaleâ€™] == â€˜19mmâ€™) ]</p>

<p><strong>D)</strong> Z = [ p for p in L if (p[â€˜marqueâ€™] == â€˜Canonâ€™ and
p[â€˜focaleâ€™] == â€˜19mmâ€™) orÂ (p[â€˜marqueâ€™]Â ==Â â€™Nikonâ€™Â andÂ </p>

<p>p[â€˜focaleâ€™] == â€˜19mmâ€™) ]</p>

<ol>
  <li><strong>Question 5</strong> On dÃ©finit le dictionnaire d = {â€˜aâ€™: 1, â€˜bâ€™: 2, â€˜câ€™:
3, â€˜zâ€™: 26}. Quelle expression permet de rÃ©cupÃ©rer la valeur de la
clÃ© â€˜zâ€™ ?</li>
</ol>

<p><strong>RÃ©ponses</strong></p>

<p><strong>A)</strong> d[4] <strong>B)</strong> d[26] <strong>C)</strong> d[z] <strong>D)</strong> d[â€˜zâ€™]</p>

<ol>
  <li><strong>Question 6</strong> On dÃ©finit ainsi une variable t :</li>
</ol>

<p>t = [ {â€˜idâ€™:1, â€˜ageâ€™:23, â€˜sejourâ€™:â€™PEKINâ€™},<br />
{â€˜idâ€™:2, â€˜ageâ€™:27, â€˜sejourâ€™:â€™ISTANBULâ€™},<br />
{â€˜idâ€™:3, â€˜ageâ€™:53, â€˜sejourâ€™:â€™LONDRESâ€™},<br />
{â€˜idâ€™:4, â€˜ageâ€™:41, â€˜sejourâ€™:â€™ISTANBULâ€™},<br />
{â€˜idâ€™:5, â€˜ageâ€™:62, â€˜sejourâ€™:â€™RIOâ€™},<br />
{â€˜idâ€™:6, â€˜ageâ€™:28, â€˜sejourâ€™:â€™ALGERâ€™}]</p>

<p>Quelle affirmation est correcte ?</p>

<p><strong><em>RÃ©ponses</em></strong></p>

<p><strong>A)</strong> t est une liste de listes <strong>B)</strong> t est une liste de dictionnaires</p>

<p><strong>C)</strong> t est un dictionnaire de listes <strong>D)</strong> t est une liste de tuples</p>

<h1 id="parcours-de-dictionnaire">Parcours de dictionnaire</h1>

<p>Il existe trois faÃ§ons de parcourir un dictionnaire. Dans les exemples,
on utilisera un dictionnaire qui reprÃ©sente un annuaire :</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">dico</span> <span class="o">=</span> <span class="p">{</span> <span class="s">'Paul'</span> <span class="p">:</span> <span class="s">'0640507080'</span><span class="p">,</span> <span class="s">'Marie'</span> <span class="p">:</span> <span class="s">'0742516483'</span><span class="p">,</span> <span class="s">'Hicham'</span> <span class="p">:</span> <span class="s">'0987416543'</span><span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>
    <p><strong>Parcours par clefs :</strong></p>

    <ul>
      <li>Comme pour les types <code class="language-plaintext highlighter-rouge">list</code>, <code class="language-plaintext highlighter-rouge">str</code> et <code class="language-plaintext highlighter-rouge">tuple</code>, les dictionnaires
sont itÃ©rables avec la syntaxe <code class="language-plaintext highlighter-rouge">for clef in dico</code> de type <code class="language-plaintext highlighter-rouge">list</code>
ou <code class="language-plaintext highlighter-rouge">tuple</code>, mais on ne parcourt ainsi que les clefs. On peut
aussi utiliser la mÃ©thode <code class="language-plaintext highlighter-rouge">keys</code>. <em>Ã€ partir des clefs on peut
retrouver les valeurs.</em></li>
    </ul>
  </li>
</ul>

<!-- end list -->

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">clef</span> <span class="ow">in</span> <span class="n">dico</span><span class="p">:</span>
<span class="p">...</span>     <span class="k">print</span><span class="p">(</span><span class="s">"Clef -&gt; "</span><span class="p">,</span> <span class="n">clef</span><span class="p">)</span>
<span class="p">...</span> 
<span class="n">Clef</span> <span class="o">-&gt;</span>  <span class="n">Paul</span>
<span class="n">Clef</span> <span class="o">-&gt;</span>  <span class="n">Marie</span>
<span class="n">Clef</span> <span class="o">-&gt;</span>  <span class="n">Hicham</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">clef</span> <span class="ow">in</span> <span class="n">dico</span><span class="p">.</span><span class="n">keys</span><span class="p">():</span>
<span class="p">...</span>     <span class="k">print</span><span class="p">(</span><span class="s">"Clef -&gt;"</span><span class="p">,</span> <span class="n">clef</span><span class="p">,</span> <span class="s">" Valeur -&gt;"</span><span class="p">,</span> <span class="n">dico</span><span class="p">[</span><span class="n">clef</span><span class="p">])</span>
<span class="p">...</span> 
<span class="n">Clef</span> <span class="o">-&gt;</span> <span class="n">Paul</span>  <span class="n">Valeur</span> <span class="o">-&gt;</span> <span class="mi">0640507080</span>
<span class="n">Clef</span> <span class="o">-&gt;</span> <span class="n">Marie</span>  <span class="n">Valeur</span> <span class="o">-&gt;</span> <span class="mi">0742516483</span>
<span class="n">Clef</span> <span class="o">-&gt;</span> <span class="n">Hicham</span>  <span class="n">Valeur</span> <span class="o">-&gt;</span> <span class="mi">0987416543</span>
</code></pre></div></div>

<ul>
  <li><em>Lâ€™ordre de parcours nâ€™est pas forcÃ©ment lâ€™ordre dâ€™insertion car un
dictionnaire nâ€™est pas ordonnÃ©</em> Ainsi, on ne peut pas parcourir un
dictionnaire par index avec <code class="language-plaintext highlighter-rouge">for k in range(len(dico))</code>.</li>
</ul>

<!-- end list -->

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dico</span><span class="p">)):</span>
<span class="p">...</span>     <span class="k">print</span><span class="p">(</span><span class="n">dico</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
<span class="p">...</span> 
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">2</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="nb">KeyError</span><span class="p">:</span> <span class="mi">0</span>
</code></pre></div></div>

<ul>
  <li><strong>Parcours par valeurs :</strong></li>
</ul>

<p>On peut parcourir un dictionnaire par valeurs avec sa mÃ©thode <code class="language-plaintext highlighter-rouge">values</code>.
<em>Ã€ partir des valeurs on ne peut cependant pas retrouver les clefs.</em></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">dico</span><span class="p">.</span><span class="n">values</span><span class="p">():</span>
<span class="p">...</span>     <span class="k">print</span><span class="p">(</span><span class="s">"Valeur -&gt; "</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
<span class="p">...</span> 
<span class="n">Valeur</span> <span class="o">-&gt;</span>  <span class="mi">0640507080</span>
<span class="n">Valeur</span> <span class="o">-&gt;</span>  <span class="mi">0742516483</span>
<span class="n">Valeur</span> <span class="o">-&gt;</span>  <span class="mi">0987416543</span>
</code></pre></div></div>

<ul>
  <li><strong>Parcours par paires (clef, valeur) :</strong></li>
</ul>

<p>On peut parcourir un dictionnaire par paires (clef, valeur) valeurs avec
sa mÃ©thode <code class="language-plaintext highlighter-rouge">items</code>. On utilise le mÃ©canisme de <em>tuple unpacking</em> dans la
boucle <code class="language-plaintext highlighter-rouge">for</code>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="p">(</span><span class="n">clef</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span> <span class="ow">in</span> <span class="n">dico</span><span class="p">.</span><span class="n">items</span><span class="p">():</span>
<span class="p">...</span>     <span class="k">print</span><span class="p">(</span><span class="s">"Clef -&gt;"</span><span class="p">,</span> <span class="n">clef</span><span class="p">,</span> <span class="s">" Valeur -&gt;"</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
<span class="p">...</span> 
<span class="n">Clef</span> <span class="o">-&gt;</span> <span class="n">Paul</span>  <span class="n">Valeur</span> <span class="o">-&gt;</span> <span class="mi">0640507080</span>
<span class="n">Clef</span> <span class="o">-&gt;</span> <span class="n">Marie</span>  <span class="n">Valeur</span> <span class="o">-&gt;</span> <span class="mi">0742516483</span>
<span class="n">Clef</span> <span class="o">-&gt;</span> <span class="n">Hicham</span>  <span class="n">Valeur</span> <span class="o">-&gt;</span> <span class="mi">0987416543</span>
</code></pre></div></div>

<p><strong>Exercice 4</strong></p>

<p>On considÃ¨re le dictionnaire :</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dico</span> <span class="o">=</span> <span class="p">{</span><span class="s">"a"</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="s">"b"</span> <span class="p">:</span> <span class="bp">False</span><span class="p">,</span> <span class="s">"c"</span> <span class="p">:</span> <span class="bp">True</span><span class="p">}</span>
</code></pre></div></div>

<ol>
  <li>Quels sont les affichages possibles lors de lâ€™exÃ©cution du code
suivant ?</li>
</ol>

<!-- end list -->

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">clef</span> <span class="ow">in</span> <span class="n">dico</span><span class="p">.</span><span class="n">keys</span><span class="p">()</span>
  <span class="k">print</span><span class="p">(</span><span class="n">clef</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">" "</span><span class="p">)</span>
</code></pre></div></div>

<p><strong><em>RÃ©ponses</em></strong></p>

<p><strong>A)</strong> <code class="language-plaintext highlighter-rouge">a b c</code> <strong>B)</strong> <code class="language-plaintext highlighter-rouge">True False True</code> <strong>C)</strong> <code class="language-plaintext highlighter-rouge">(a, True) (b, False) (c,
True)</code></p>

<ol>
  <li>Quels sont les affichages possibles lors de lâ€™exÃ©cution du code
suivant ?</li>
</ol>

<!-- end list -->

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">dico</span><span class="p">.</span><span class="n">items</span><span class="p">()</span>
  <span class="k">print</span><span class="p">(</span><span class="n">clef</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">" "</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>A)</strong> <code class="language-plaintext highlighter-rouge">a b c</code> <strong>B)</strong> <code class="language-plaintext highlighter-rouge">True False True</code> <strong>C)</strong> <code class="language-plaintext highlighter-rouge">(a, True) (b, False) (c,
True)</code></p>

<h1 id="rÃ©fÃ©rences-partagÃ©es-et-mutabilitÃ©">RÃ©fÃ©rences partagÃ©es et mutabilitÃ©</h1>

<p>Une variable de type <code class="language-plaintext highlighter-rouge">dict</code> nâ€™est quâ€™une rÃ©fÃ©rence, un <strong>alias</strong> vers la
zone mÃ©moire oÃ¹ sont stockÃ©es les donnÃ©es. Comme pour les tableaux de
type <code class="language-plaintext highlighter-rouge">list</code> il faut prÃªter attention aux effets non maÃ®trisÃ©es des
rÃ©fÃ©rences partagÃ©es.</p>

<ul>
  <li>Les dictionnaires Ã©tant des valeurs <strong>mutables</strong>, ils peuvent Ãªtre
modifiÃ©s par <strong>effet de bord</strong> lorsquâ€™ils sont transmis Ã  une
fonction.</li>
  <li>Pour copier une structure imbriquÃ©e avec des dictionnaires il faut
rÃ©aliser une copie profonde avec la fonction <code class="language-plaintext highlighter-rouge">deepcopy</code> du module
<code class="language-plaintext highlighter-rouge">copy</code>.</li>
</ul>

<p>On donne ci-dessous un programme et deux visualisations de son
environnement : avant et aprÃ¨s lâ€™exÃ©cution de la derniÃ¨re instruction.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">contact_ami</span> <span class="o">=</span> <span class="p">{</span> <span class="s">'Paul'</span> <span class="p">:</span> <span class="s">'0640507080'</span><span class="p">,</span> <span class="s">'Marie'</span> <span class="p">:</span> <span class="s">'0742516483'</span><span class="p">}</span>
<span class="n">contact_travail</span> <span class="o">=</span> <span class="p">{</span> <span class="s">'Adam'</span> <span class="p">:</span> <span class="s">'0666666666'</span><span class="p">,</span> <span class="s">'Eve'</span> <span class="p">:</span> <span class="s">'0777777777'</span><span class="p">}</span>
<span class="n">contact_tous</span> <span class="o">=</span> <span class="p">{</span><span class="s">'amis'</span> <span class="p">:</span> <span class="n">contact_ami</span><span class="p">,</span> <span class="s">'travail'</span> <span class="p">:</span> <span class="n">contact_travail</span><span class="p">}</span>
<span class="n">contact_copie</span> <span class="o">=</span> <span class="n">contact_tous</span>

<span class="k">def</span> <span class="nf">ajout</span><span class="p">(</span><span class="n">contact</span><span class="p">,</span> <span class="n">nom</span><span class="p">,</span> <span class="n">numero</span><span class="p">):</span>
    <span class="n">contact</span><span class="p">[</span><span class="n">nom</span><span class="p">]</span> <span class="o">=</span> <span class="n">numero</span>

<span class="n">ajout</span><span class="p">(</span><span class="n">contact_ami</span><span class="p">,</span> <span class="s">'Napoleon'</span><span class="p">,</span> <span class="s">'0618001814'</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="images/attention.png" alt="Attention 1" /><br />
&amp; <img src="images/attention2.png" alt="Attention 2" /></p>

<h1 id="performance">Performance</h1>

<p><strong>PropriÃ©tÃ© 1</strong></p>

<p>Les dictionnaires de type <code class="language-plaintext highlighter-rouge">dict</code> sont implÃ©mentÃ©s en
<a href="https://docs.python.org/3/tutorial/datastructures.html">Python</a> par des
<a href="https://fr.wikipedia.org/wiki/Table_de_hachage">tables de hachage</a> qui
est une structure de donnÃ©es trÃ¨s efficace pour le test dâ€™appartenance,
la recherche ou lâ€™insertion dâ€™Ã©lÃ©ment. On peut considÃ©rer que ces
opÃ©rations se font en temps quasiment constant, câ€™est-Ã -dire
indÃ©pendant de la taille du dictionnaire alors que la recherche et le
test dâ€™appartenance sâ€™effectue en temps linÃ©aire en moyenne
(proportionnel Ã  la taille du tableau) pour les tableaux de type <code class="language-plaintext highlighter-rouge">list</code>
ou les <code class="language-plaintext highlighter-rouge">tuple</code>. Cet optimisation des performances en temps se fait au
dÃ©triment de lâ€™occupation en espace, les dictionnaires Ã©tant plus
gourmands en mÃ©moire que les tableaux.</p>

<p>On donne ci-dessous un comparatif de temps dâ€™exÃ©cutions pour la
recherche de 1000 flottants dâ€™un tableau <code class="language-plaintext highlighter-rouge">needle</code> (aiguilles) de taille
500, dans des tableaux de flottants <code class="language-plaintext highlighter-rouge">haystack</code> (meule de foin) de taille
croissante <img src="https://latex.codecogs.com/png.latex?10%5E%7Bk%7D" alt="10^{k}" title="10^{k}" /> avec <img src="https://latex.codecogs.com/png.latex?k%20%5Cin%20%5C%7B3%2C4%2C5%2C6%2C7%5C%7D" alt="k \in
\{3,4,5,6,7\}" title="k \\in \\{3,4,5,6,7\\}" />. Pour chaque test, les Ã©lÃ©ments de <code class="language-plaintext highlighter-rouge">haystack</code>
et <code class="language-plaintext highlighter-rouge">needle</code>sont tous distincts et la moitiÃ© de <code class="language-plaintext highlighter-rouge">needle</code> est dans
<code class="language-plaintext highlighter-rouge">haystack</code>.</p>

<p>Le code de cet exemple, tirÃ© de lâ€™ouvrage Python Fluent de Luciano
Ramalho, est disponible avec nos commentaires dans lâ€™archive
<a href="https://gitlab.com/frederic-junier/nsi/-/blob/master/TypesConstruits/Dictionnaires/Cours/ressources/test_performance_in.zip">test_performance_in.zip</a>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Type de conteneur dict
--------------------
Taille de la meule de foin :     1000
Temps minimum de recherche de 1000 aiguilles  (sur 5 recherches): 0.000104s
--------------------
Taille de la meule de foin :    10000
Temps minimum de recherche de 1000 aiguilles  (sur 5 recherches): 0.000196s
--------------------
Taille de la meule de foin :   100000
Temps minimum de recherche de 1000 aiguilles  (sur 5 recherches): 0.000252s
--------------------
Taille de la meule de foin :  1000000
Temps minimum de recherche de 1000 aiguilles  (sur 5 recherches): 0.000399s
--------------------
Taille de la meule de foin : 10000000
Temps minimum de recherche de 1000 aiguilles  (sur 5 recherches): 0.000483s
--------------------

Type de conteneur list
--------------------
Taille de la meule de foin :     1000
Temps minimum de recherche de 1000 aiguilles  (sur 5 recherches): 0.008002s
--------------------
Taille de la meule de foin :    10000
Temps minimum de recherche de 1000 aiguilles  (sur 5 recherches): 0.078902s
--------------------
Taille de la meule de foin :   100000
Temps minimum de recherche de 1000 aiguilles  (sur 5 recherches): 0.812977s
--------------------
Taille de la meule de foin :  1000000
Temps minimum de recherche de 1000 aiguilles  (sur 5 recherches): 8.554425s
--------------------
Taille de la meule de foin : 10000000
Temps minimum de recherche de 1000 aiguilles (sur 5 recherches):84.754335s
--------------------
</code></pre></div></div>

<h1 id="synthÃ¨se">SynthÃ¨se</h1>

<p><strong>Ã€ retenir</strong></p>

<ul>
  <li>Le type construit <strong>p-uplet nommÃ©</strong> est une sÃ©quence non ordonnÃ©e
dâ€™Ã©lÃ©ments qui sont des paires <code class="language-plaintext highlighter-rouge">(clef, valeur)</code> ou <code class="language-plaintext highlighter-rouge">clef :
valeur</code>. Chaque <code class="language-plaintext highlighter-rouge">valeur</code> est indexÃ©e par sa <code class="language-plaintext highlighter-rouge">clef</code> et non par un
index entier comme dans <strong>p-uplet</strong>.</li>
  <li>En <a href="https://docs.python.org/3/tutorial/datastructures.html">Python</a>
un <strong>p-uplet nommÃ©</strong> est un <strong>dictionnaire</strong> de type <code class="language-plaintext highlighter-rouge">dict</code>
implÃ©mentÃ© par une table de hachage qui permet des opÃ©rations trÃ¨s
performantes en temps constant.</li>
  <li>Lâ€™accÃ¨s, lâ€™ajout, la modification dâ€™un dictionnaire sâ€™effectue avec
lâ€™opÃ©rateur crochet et la syntaxe <code class="language-plaintext highlighter-rouge">dico[clef] = valeur</code>.</li>
  <li>Une variable de type <code class="language-plaintext highlighter-rouge">dict</code> est une <strong>rÃ©fÃ©rence</strong> et elle peut Ãªtre
modifiÃ©e par effet de bord car câ€™est une valeur <strong>mutable</strong>.</li>
  <li>Trois mÃ©thodes permettent le parcours de dictionnaire :
    <ul>
      <li>par clefs avec <code class="language-plaintext highlighter-rouge">for clef in doc.keys()</code></li>
      <li>par valeurs avec <code class="language-plaintext highlighter-rouge">for clef in doc.values()</code></li>
      <li>par paires <code class="language-plaintext highlighter-rouge">(clef, valeur)</code> avec <code class="language-plaintext highlighter-rouge">for (clef, valeur) in
doc.items()</code></li>
    </ul>
  </li>
</ul>
:ET